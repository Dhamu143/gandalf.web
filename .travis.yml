language: node_js
node_js:
  - '5.1.0'
before_install:
  - wget http://chromedriver.storage.googleapis.com/2.21/chromedriver_linux64.zip
  - unzip chromedriver_linux64.zip
  - sudo chmod u+x chromedriver
  - sudo mv chromedriver /usr/bin/

  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0

  - sh -e /etc/init.d/xvfb start
  - 'npm install -g protractor'
  - 'webdriver-manager update'
before_script:
  - 'npm install -g bower'
  - 'gem install sass --version "=3.4.12"'
  - 'gem install compass --version "=1.0.3"'
  - 'npm install -g bower grunt-cli'
  - 'bower install'
script:
  - 'gulp build'
  - 'webdriver-manager start & gulp test'

notifications:
  email: false
